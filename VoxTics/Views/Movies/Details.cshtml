@model VoxTics.Models.ViewModels.Movie.MovieDetailsVM
@using VoxTics.Helpers.ImgsHelper

@{
    ViewData["Title"] = Model.Title;
}

<h2>@Model.Title</h2>
<p><strong>Category:</strong> @Model.Category?.Name</p>
<p><strong>Director:</strong> @Model.Director</p>
<p><strong>Release Date:</strong> @Model.ReleaseDate.ToShortDateString()</p>
<p><strong>Duration:</strong> @Model.Duration mins</p>
<p><strong>Price:</strong> @Model.Price.ToString("C")</p>
<p><strong>Rating:</strong> @(Model.Rating?.ToString("0.0") ?? "-")</p>
<p><strong>Description:</strong> @Model.Description</p>

<h4>Main Image</h4>
<img src="@Model.MainImageUrl" alt="@Model.Title" width="300" />

@if (Model.VariantImages.Any())
{
    <h4>Gallery</h4>
    <div class="row">
        @foreach (var img in Model.VariantImages)
        {
            <div class="col-md-3 mb-2">
                <img src="@img.Url" alt="@img.AltText ?? Model.Title" class="img-fluid" />
            </div>
        }
    </div>
}

@if (Model.Actors.Any())
{
    <h4>Actors</h4>
    <ul>
        @foreach (var actor in Model.Actors)
        {
            <li>
                @actor.FullName
                @if (!string.IsNullOrEmpty(actor.ImageUrl))
                {
                    <img src="@actor.ImageUrl" alt="@actor.FullName" width="50" />
                }
            </li>
        }
    </ul>
}

@if (Model.Showtimes.Any())
{
    <h4>Showtimes</h4>
    <ul>
        @foreach (var st in Model.Showtimes)
        {
            <li>@st.StartTime.ToString("dd/MM/yyyy HH:mm") - @st.HallId</li>
        }
    </ul>
}

<a asp-action="Index" class="btn btn-secondary">Back to List</a>
<a class="btn btn-success" asp-controller="Bookings" asp-action="Create" asp-route-movieId="@Model.Id">Book Now</a>
