@model VoxTics.Helpers.PaginatedList<VoxTics.Models.ViewModels.CinemaVM>

@{
    ViewData["Title"] = "Cinemas";
    var search = Context.Request.Query["search"].ToString();
}

<div class="space-y-6">

    <!-- Search -->
    <form id="cinemaFilterForm" method="get" class="flex gap-2">
        <input type="text" name="search" value="@search"
               placeholder="Search cinemas..."
               class="border p-2 rounded w-full" />

        <button type="submit" class="bg-indigo-600 text-white px-4 py-2 rounded">
            Search
        </button>
    </form>

    <!-- Cinema cards (AJAX updates here) -->
    <div id="cinemasContainer">
        @await Html.PartialAsync("_CinemaCards", Model)
    </div>

    <!-- Pagination -->
    <div class="mt-4">
        @await Html.PartialAsync("_Pagination", Model)
    </div>
</div>

@section Scripts {
    <script>
        $(document).on("submit", "#cinemaFilterForm", function (e) {
            e.preventDefault();
            $.get('@Url.Action("Index")', $(this).serialize(), function (data) {
                $("#cinemasContainer").html($(data).find("#cinemasContainer").html());
                $(".pagination").html($(data).find(".pagination").html());
            });
        });
    </script>
}
