@using VoxTics.Helpers
@model PaginatedList<VoxTics.Models.ViewModels.CinemaVM>

<h2 class="mb-4">Cinemas</h2>

<div class="mb-3">
    <form asp-action="Index" method="get" class="ajax-search-form" data-target="#cards-container">
        <div class="row g-2">
            <div class="col-md-6">
                <input type="text" name="search" class="form-control"
                       placeholder="Search cinemas..."
                       value="@(Model.RouteValues != null && Model.RouteValues.ContainsKey("search") ? Model.RouteValues["search"] : "")" />
            </div>
            <div class="col-md-4">
                <input type="text" name="location" class="form-control ajax-filter"
                       placeholder="Location"
                       value="@(Model.RouteValues != null && Model.RouteValues.ContainsKey("location") ? Model.RouteValues["location"] : "")" />
            </div>
            <div class="col-md-2 d-grid">
                <button type="submit" class="btn btn-primary">Search</button>
            </div>
        </div>
    </form>
</div>

<div id="cinemas-container">
    <div id="cards-container">
        @await Html.PartialAsync("_CinemaCards", Model)
    </div>

    @await Html.PartialAsync("~/Views/Shared/_Pagination.cshtml", Model, new ViewDataDictionary(ViewData) {
        { "Action", "Index" },
        { "Controller", "Cinemas" },
        { "Target", "#cards-container" }
        })
</div>

@await Html.PartialAsync("~/Views/Shared/_Loader.cshtml")
