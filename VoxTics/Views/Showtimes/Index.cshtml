@model VoxTics.Helpers.PaginatedList<VoxTics.Models.ViewModels.ShowtimeVM>

<div class="space-y-6">
    <!-- Filters -->
    <form id="showtimeFilterForm" method="get" class="flex flex-wrap gap-2 items-center">
        <input type="text" name="search"
               value="@ViewContext.HttpContext.Request.Query["search"]"
               placeholder="Search cinemas..."
               class="border p-2 rounded w-full" />

        <input type="date" name="date"
               value="@ViewContext.HttpContext.Request.Query["date"]"
               class="border p-2 rounded" />


        <button type="submit" class="bg-indigo-600 text-white px-4 py-2 rounded">
            Filter
        </button>
    </form>

    <!-- Showtimes list (AJAX updated) -->
    <div id="showtimesContainer">
        @await Html.PartialAsync("_ShowtimeCards", Model)
    </div>

    <!-- Pagination -->
    <div class="mt-4">
        @await Html.PartialAsync("_Pagination", Model)
    </div>
</div>

@section Scripts {
    <script>
        $(document).on("submit", "#showtimeFilterForm", function (e) {
            e.preventDefault();
            $.get('@Url.Action("Index")', $(this).serialize(), function (data) {
                $("#showtimesContainer").html($(data).find("#showtimesContainer").html());
            });
        });
    </script>
}
