<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>@ViewData["Title"] - VoxTics Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="VoxTics Cinema Management System - Admin Panel">
    <meta name="theme-color" content="#667eea">

    @* Preload critical resources *@
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">

    @* CSS libraries *@
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="~/lib/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/lib/bootstrap-icons/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="~/lib/animate.css/animate.min.css" />
    <link rel="stylesheet" href="~/lib/toastr/toastr.min.css" />
    <link rel="stylesheet" href="~/lib/sweetalert2/sweetalert2.min.css" />
    <link rel="stylesheet" href="~/css/site.css" />
    <link rel="stylesheet" href="~/css/admin/adminlayout.css" />

   

    @RenderSection("Styles", required: false)
</head>
<body>
    <!-- Enhanced Page Loader -->
    <div id="page-loader">
        <div class="loader-content">
            <div class="spinner"></div>
            <div class="loader-text">Loading...</div>
        </div>
    </div>

    <!-- Mobile Toggle Button -->
    <button class="mobile-toggle" id="mobileToggle" aria-label="Toggle sidebar">
        <i class="bi bi-list"></i>
    </button>

    <div class="admin-wrapper">
        <!-- Enhanced Sidebar -->
        <nav class="admin-sidebar" id="adminSidebar" role="navigation" aria-label="Main navigation">
            <!-- Sidebar Toggle -->
            <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
                <i class="bi bi-chevron-left"></i>
            </button>

            <div class="sidebar-content">
                <!-- Admin Logo -->
                <a class="admin-logo" asp-area="Admin" asp-controller="Home" asp-action="Index">
                    <span class="logo-icon">
                        <i class="fas fa-clapperboard"></i>
                    </span>
                    <span class="logo-text">VoxTics Admin</span>
                </a>

                <ul class="admin-nav">
                    <!-- Dashboard Section -->
                    <div class="nav-section">
                        <div class="nav-section-title">Dashboard</div>
                    <li class="nav-item">
                        <a asp-area="Admin" asp-controller="Home" asp-action="Index"
                           class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Home" ? "active" : "")"
                           data-page="dashboard">
                            <i class="bi bi-speedometer2 nav-icon"></i>
                            <span class="nav-text">Overview</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a asp-area="Admin" asp-controller="Analytics" asp-action="Index"
                           class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Analytics" ? "active" : "")"
                           data-page="analytics">
                            <i class="bi bi-bar-chart nav-icon"></i>
                            <span class="nav-text">Analytics</span>
                        </a>
                    </li>
            </div>

            <!-- Content Management -->
            <div class="nav-section">
                <div class="nav-section-title">Content</div>
                <li class="nav-item">
                    <a asp-area="Admin" asp-controller="Movies" asp-action="Index"
                       class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Movies" ? "active" : "")"
                       data-page="movies">
                        <i class="bi bi-film nav-icon"></i>
                        <span class="nav-text">Movies</span>
                        <span class="nav-badge" id="moviesBadge">24</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a asp-area="Admin" asp-controller="Categories" asp-action="Index"
                       class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Categories" ? "active" : "")"
                       data-page="categories">
                        <i class="bi bi-tags nav-icon"></i>
                        <span class="nav-text">Categories</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a asp-area="Admin" asp-controller="Cinemas" asp-action="Index"
                       class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Cinemas" ? "active" : "")"
                       data-page="cinemas">
                        <i class="bi bi-building nav-icon"></i>
                        <span class="nav-text">Cinemas</span>
                    </a>
                </li>
            </div>

            <!-- Operations -->
            <div class="nav-section">
                <div class="nav-section-title">Operations</div>
                <li class="nav-item">
                    <a asp-area="Admin" asp-controller="Showtimes" asp-action="Index"
                       class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Showtimes" ? "active" : "")"
                       data-page="showtimes">
                        <i class="bi bi-calendar-event nav-icon"></i>
                        <span class="nav-text">Showtimes</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a asp-area="Admin" asp-controller="Bookings" asp-action="Index"
                       class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Bookings" ? "active" : "")"
                       data-page="bookings">
                        <i class="bi bi-ticket-perforated nav-icon"></i>
                        <span class="nav-text">Bookings</span>
                        <span class="nav-badge" id="bookingsBadge">12</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a asp-area="Admin" asp-controller="Reports" asp-action="Index"
                       class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Reports" ? "active" : "")"
                       data-page="reports">
                        <i class="bi bi-file-earmark-text nav-icon"></i>
                        <span class="nav-text">Reports</span>
                    </a>
                </li>
            </div>

            <!-- User Management -->
            <div class="nav-section">
                <div class="nav-section-title">Users</div>
                <li class="nav-item">
                    <a asp-area="Admin" asp-controller="Users" asp-action="Index"
                       class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Users" ? "active" : "")"
                       data-page="users">
                        <i class="bi bi-people nav-icon"></i>
                        <span class="nav-text">Manage Users</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a asp-area="Admin" asp-controller="Roles" asp-action="Index"
                       class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Roles" ? "active" : "")"
                       data-page="roles">
                        <i class="bi bi-shield-check nav-icon"></i>
                        <span class="nav-text">Roles & Permissions</span>
                    </a>
                </li>
            </div>

            <!-- System -->
            <div class="nav-section">
                <div class="nav-section-title">System</div>
                <li class="nav-item">
                    <a asp-area="Admin" asp-controller="Settings" asp-action="Index"
                       class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Settings" ? "active" : "")"
                       data-page="settings">
                        <i class="bi bi-gear nav-icon"></i>
                        <span class="nav-text">Settings</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a asp-area="Admin" asp-controller="Logs" asp-action="Index"
                       class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Logs" ? "active" : "")"
                       data-page="logs">
                        <i class="bi bi-file-text nav-icon"></i>
                        <span class="nav-text">System Logs</span>
                    </a>
                </li>
            </div>

            <!-- Back to Site -->
            <div class="back-to-site">
                <li class="nav-item">
                    <a asp-area="" asp-controller="Home" asp-action="Index" class="nav-link" target="_blank">
                        <i class="bi bi-arrow-left nav-icon"></i>
                        <span class="nav-text">Back to Site</span>
                        <i class="bi bi-box-arrow-up-right ms-auto" style="font-size: 0.75rem;"></i>
                    </a>
                </li>
            </div>
            </ul>
    </div>
    </nav>

    <!-- Main Content Area -->
    <div class="admin-main" id="adminMain">
        <!-- Top Bar -->
        <header class="admin-topbar">
            <div class="breadcrumb-section">
                <h1>@ViewData["Title"]</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a href="#" style="color: var(--text-muted); text-decoration: none;">Admin</a>
                        </li>
                        <li class="breadcrumb-item">
                            @ViewContext.RouteData.Values["Controller"]
                        </li>
                        @if (ViewContext.RouteData.Values["Action"]?.ToString() != "Index")
                        {
                            <li class="breadcrumb-item active">
                                @ViewContext.RouteData.Values["Action"]
                            </li>
                        }
                    </ol>
                </nav>
            </div>

            <div class="topbar-actions">
                <!-- Search -->
                <button class="topbar-btn" id="globalSearch" title="Global Search" data-bs-toggle="modal" data-bs-target="#searchModal">
                    <i class="bi bi-search"></i>
                </button>

                <!-- Notifications -->
                <div class="dropdown">
                    <button class="topbar-btn position-relative" id="notificationsToggle" data-bs-toggle="dropdown" aria-expanded="false" title="Notifications">
                        <i class="bi bi-bell"></i>
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="font-size: 0.6em;">
                            3
                            <span class="visually-hidden">unread messages</span>
                        </span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end p-0" style="width: 320px; max-height: 400px; overflow-y: auto;">
                        <div class="dropdown-header d-flex justify-content-between align-items-center">
                            <span class="fw-semibold">Notifications</span>
                            <button class="btn btn-sm btn-link p-0" id="markAllRead">Mark all as read</button>
                        </div>
                        <div class="dropdown-divider m-0"></div>
                        <div id="notificationsList">
                            <a href="#" class="dropdown-item d-flex align-items-start py-3">
                                <div class="flex-shrink-0 me-3">
                                    <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;">
                                        <i class="bi bi-ticket-perforated text-white" style="font-size: 0.875rem;"></i>
                                    </div>
                                </div>
                                <div class="flex-grow-1">
                                    <div class="fw-semibold text-dark">New booking received</div>
                                    <div class="text-muted small">User John Doe booked Avengers movie</div>
                                    <div class="text-muted small">2 minutes ago</div>
                                </div>
                            </a>
                            <a href="#" class="dropdown-item d-flex align-items-start py-3">
                                <div class="flex-shrink-0 me-3">
                                    <div class="rounded-circle bg-success d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;">
                                        <i class="bi bi-check-circle text-white" style="font-size: 0.875rem;"></i>
                                    </div>
                                </div>
                                <div class="flex-grow-1">
                                    <div class="fw-semibold text-dark">Payment confirmed</div>
                                    <div class="text-muted small">Booking #1234 payment processed</div>
                                    <div class="text-muted small">5 minutes ago</div>
                                </div>
                            </a>
                            <a href="#" class="dropdown-item d-flex align-items-start py-3">
                                <div class="flex-shrink-0 me-3">
                                    <div class="rounded-circle bg-warning d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;">
                                        <i class="bi bi-exclamation-triangle text-white" style="font-size: 0.875rem;"></i>
                                    </div>
                                </div>
                                <div class="flex-grow-1">
                                    <div class="fw-semibold text-dark">System maintenance</div>
                                    <div class="text-muted small">Scheduled maintenance in 2 hours</div>
                                    <div class="text-muted small">1 hour ago</div>
                                </div>
                            </a>
                        </div>
                        <div class="dropdown-divider m-0"></div>
                        <a href="@Url.Action("Index", "Notifications", new { area = "Admin" })" class="dropdown-item text-center py-2">
                            <small>View all notifications</small>
                        </a>
                    </div>
                </div>

                <!-- Theme Toggle -->
                <button class="topbar-btn" id="themeToggle" title="Toggle theme">
                    <i class="bi bi-moon"></i>
                </button>

                <!-- Fullscreen -->
                <button class="topbar-btn" id="fullscreenToggle" title="Toggle fullscreen">
                    <i class="bi bi-arrows-fullscreen"></i>
                </button>

                <!-- User Menu -->
                <div class="dropdown user-menu">
                    <div class="user-avatar status-online" data-bs-toggle="dropdown" aria-expanded="false" title="User menu">
                        A
                    </div>
                    <div class="dropdown-menu dropdown-menu-end">
                        <div class="dropdown-header">
                            <div class="fw-semibold">Admin User</div>
                            <div class="text-muted small">admin@voxtics.com</div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="@Url.Action("Profile", "Account", new { area = "Admin" })">
                            <i class="bi bi-person me-2"></i>Profile
                        </a>
                        <a class="dropdown-item" href="@Url.Action("Settings", "Account", new { area = "Admin" })">
                            <i class="bi bi-gear me-2"></i>Account Settings
                        </a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item text-danger" href="@Url.Action("Logout", "Account", new { area = "Admin" })">
                            <i class="bi bi-box-arrow-right me-2"></i>Logout
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Content Area -->
        <main class="admin-content">
            <div class="content-wrapper">
                @RenderBody()
            </div>
        </main>
    </div>
    </div>

    <!-- Global Search Modal -->
    <div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" style="background: var(--glass-bg); backdrop-filter: var(--blur); border: 1px solid var(--glass-border);">
                <div class="modal-header border-0">
                    <h5 class="modal-title" id="searchModalLabel" style="color: var(--text-primary);">Global Search</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="input-group mb-3">
                        <span class="input-group-text" style="background: var(--glass-bg); border: 1px solid var(--glass-border); color: var(--text-secondary);">
                            <i class="bi bi-search"></i>
                        </span>
                        <input type="text" class="form-control" id="globalSearchInput" placeholder="Search movies, users, bookings..."
                               style="background: var(--glass-bg); border: 1px solid var(--glass-border); color: var(--text-primary);">
                    </div>
                    <div id="searchResults" class="mt-3">
                        <div class="text-muted text-center py-4">
                            <i class="bi bi-search display-6 opacity-50"></i>
                            <div class="mt-2">Start typing to search...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="~/lib/jquery/jquery.min.js"></script>
    <script src="~/lib/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="~/lib/jquery-validate/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validate-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/lib/toastr/toastr.min.js"></script>
    <script src="~/lib/sweetalert2/sweetalert2.all.min.js"></script>
    <script src="~/js/site.js"></script>
    <script src="~/js/admin/admin.js"></script>

   

    @RenderSection("Scripts", required: false)
</body>
</html>