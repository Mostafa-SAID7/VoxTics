@using VoxTics.Areas.Admin.ViewModels.Booking
@model BookingViewModel

@{
    ViewData["Title"] = "Booking Details";
}

<h2>Booking Details - @Model.BookingReference</h2>

<div class="card mb-3">
    <div class="card-body">
        <h5 class="card-title">@Model.MovieTitle</h5>
        <p class="card-text">
            <strong>User:</strong> @Model.UserName (@Model.UserEmail) <br />
            <strong>Cinema / Hall:</strong> @Model.CinemaName / @Model.HallName <br />
            <strong>Showtime:</strong> @Model.ShowDateTimeFormatted <br />
            <strong>Seats:</strong> @string.Join(", ", Model.SeatNumbers) <br />
            <strong>Number of Tickets:</strong> @Model.NumberOfTickets <br />
            <strong>Total Price:</strong> @Model.FormattedTotalPrice <br />
            <strong>Discount:</strong> @Model.DiscountAmount.ToString("0.00") <br />
            <strong>Final Amount:</strong> @Model.FinalAmount.ToString("0.00") <br />
            <strong>Status:</strong> <span class="@Model.StatusBadge">@Model.Status</span> <br />
            <strong>Payment Status:</strong> @Model.PaymentStatus <br />
            <strong>Payment Method:</strong> @Model.PaymentMethod <br />
            @if (!string.IsNullOrEmpty(Model.TransactionId))
            {
                <strong>Transaction ID:</strong> @Model.TransactionId <br />
            }
            <strong>Booking Date:</strong> @Model.BookingDateFormatted <br />
            @if (Model.PaymentDate.HasValue)
            {
                <strong>Payment Date:</strong> @Model.PaymentDate.Value.ToString("yyyy-MM-dd HH:mm") <br />
            }
            @if (!string.IsNullOrEmpty(Model.CancellationReason))
            {
                <strong>Cancellation Reason:</strong> @Model.CancellationReason <br />
                <strong>Cancellation Date:</strong> @Model.CancellationDate?.ToString("yyyy-MM-dd HH:mm") <br />
            }
            @if (!string.IsNullOrEmpty(Model.Notes))
            {
                <strong>Notes:</strong> @Model.Notes <br />
            }
        </p>
        <a asp-action="Index" class="btn btn-secondary">Back</a>
        @if (Model.CanBeCancelled)
        {
            <form asp-action="Cancel" asp-route-id="@Model.Id" method="post" class="d-inline">
                <button type="submit" class="btn btn-danger">Cancel Booking</button>
            </form>
        }
    </div>
</div>
